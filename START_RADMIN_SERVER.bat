@echo off
chcp 65001 >nul
title Glass XO Online - RadMin Server

echo.
echo ═══════════════════════════════════════════════════════════════════════════════
echo                    🔥 GLASS XO ONLINE - RADMIN SERVER 🔥
echo ═══════════════════════════════════════════════════════════════════════════════
echo.

:: Проверяем наличие Node.js
node --version >nul 2>&1
if errorlevel 1 (
    echo ❌ Node.js не найден! Установите Node.js и перезапустите скрипт.
    pause
    exit /b 1
)

:: Показываем версию Node.js
echo ✅ Node.js версия:
node --version
echo.

:: Проверяем наличие package.json
if not exist "package.json" (
    echo ❌ Файл package.json не найден! Убедитесь что вы в правильной папке.
    pause
    exit /b 1
)

:: Проверяем наличие node_modules
if not exist "node_modules" (
    echo 📦 Установка зависимостей...
    npm install
    if errorlevel 1 (
        echo ❌ Ошибка установки зависимостей!
        pause
        exit /b 1
    )
)

echo ═══════════════════════════════════════════════════════════════════════════════
echo                           🌐 НАСТРОЙКИ RADMIN
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
echo 📡 Сервер будет запущен для работы в локальной сети (RadMin)
echo 🌍 Хост: 0.0.0.0 (все сетевые интерфейсы)
echo 🔌 Порт: 6666
echo.
echo 🔧 ИНСТРУКЦИЯ ПО RADMIN:
echo    1️⃣ Запустите RadMin VPN на обоих ПК
echo    2️⃣ Подключитесь к одной сети RadMin  
echo    3️⃣ Запомните IP адрес сервера в сети RadMin
echo    4️⃣ На втором ПК откройте: http://[IP_СЕРВЕРА]:6666
echo.
echo ═══════════════════════════════════════════════════════════════════════════════

echo 🚀 Запуск сервера...
echo.

:: Устанавливаем переменные окружения для сетевой работы
set HOST=0.0.0.0
set PORT=6666

:: Запускаем сервер
node server.js

echo.
echo ═══════════════════════════════════════════════════════════════════════════════
echo                          📱 СЕРВЕР ОСТАНОВЛЕН
echo ═══════════════════════════════════════════════════════════════════════════════
echo.
echo Нажмите любую клавишу для выхода...
pause >nul 